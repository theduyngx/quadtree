qtree_self_implementation